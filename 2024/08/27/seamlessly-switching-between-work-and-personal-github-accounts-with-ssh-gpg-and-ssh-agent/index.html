<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Seamlessly Switching Between Work and Personal GitHub Accounts with SSH, GPG, and SSH Agent | Rants of a software engineer</title>

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/hyde.css">
  <link rel="stylesheet" href="/css/poole-overrides.css">
  <link rel="stylesheet" href="/css/hyde-overrides.css">
  <link rel="stylesheet" href="/css/hyde-x.css">
  <link rel="stylesheet" href="/css/highlight/sunburst.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link href="/favicon.png" rel="icon">

  <meta name="description" content="Learn how to seamlessly switch between work and personal GitHub accounts using SSH, GPG, and SSH agent configurations. This guide walks you through setting up 1Password for secure key management, configuring Git for different identities, and automating the process to enhance your development workflow.">
  <meta name="keywords" content="GitHub,SSH,GPG,1Password,Git,SSH agent,Git configuration,multiple GitHub accounts,developer workflow,automation,secure key management">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-33060296-1', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1>Ian Duffy</h1>
      <p class="lead">Rants of a software engineer</p>
    </div>

    <ul class="sidebar-nav">
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="http://github.com/imduffy15"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      <a href="https://ie.linkedin.com/in/imduffy15"><i class="fa fa-linkedin-square fa-3x"></i></a>
      
      
      
      <a href="https://www.youtube.com/channel/UCoGs2iiOIGrfXofp-3g-Qqg"><i class="fa fa-youtube-square fa-3x"></i></a>
      
      </li>
    </ul>

    
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Seamlessly Switching Between Work and Personal GitHub Accounts with SSH, GPG, and SSH Agent</h1>
    <center>
<p><img src="/images/github-switching.webp" alt=""></p>
</center>
<p>If you&rsquo;re juggling work and personal GitHub accounts, switching between them manually can get frustrating. Luckily, you can set things up so that your environment automatically switches accounts based on the project directory you&rsquo;re working in. This post will show you how to configure your SSH agent with 1Password, use different GPG keys and identities, and make it all work seamlessly.</p>
<h4 id="step-1-manage-ssh-keys-with-1password">Step 1: Manage SSH Keys with 1Password</h4>
<p>1Password’s SSH agent integration can securely manage your SSH keys so you don’t have to deal with passwords or key files every time.</p>
<ol>
<li>Add your SSH keys to 1Password.</li>
<li>Enable SSH Agent integration in 1Password so it automatically handles your keys.</li>
</ol>
<p>Once your keys are stored, associate them with your work and personal GitHub accounts.</p>
<h4 id="step-2-fetch-public-keys-from-github">Step 2: Fetch Public Keys from GitHub</h4>
<p>To verify your setup, fetch your public keys from GitHub using these URLs:</p>
<ul>
<li>Work account: <code>https://github.com/work-username.keys</code></li>
<li>Personal account: <code>https://github.com/personal-username.keys</code></li>
</ul>
<h4 id="step-3-configure-ssh-with-identitiesfile">Step 3: Configure SSH with <code>IdentitiesFile</code></h4>
<p>Next, configure your SSH client to use the correct key for each GitHub account. Add the following to your <code>~/.ssh/config</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Personal GitHub account</span>
</span></span><span class="line"><span class="cl">Host personal-github
</span></span><span class="line"><span class="cl">  HostName github.com
</span></span><span class="line"><span class="cl">  User git
</span></span><span class="line"><span class="cl">  IdentitiesOnly yes
</span></span><span class="line"><span class="cl">  IdentitiesFile ~/.ssh/personal_rsa
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Work GitHub account</span>
</span></span><span class="line"><span class="cl">Host work-github
</span></span><span class="line"><span class="cl">  HostName github.com
</span></span><span class="line"><span class="cl">  User git
</span></span><span class="line"><span class="cl">  IdentitiesOnly yes
</span></span><span class="line"><span class="cl">  IdentitiesFile ~/.ssh/work_rsa
</span></span></code></pre></div><p>You can test your SSH config with these commands:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ssh work-github
</span></span><span class="line"><span class="cl">$ ssh personal-github
</span></span></code></pre></div><h4 id="step-4-load-git-config-based-on-directory">Step 4: Load Git Config Based on Directory</h4>
<p>To load different Git configurations depending on the directory, add the following to your <code>~/.gitconfig</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[includeIf &#34;gitdir:~/work/&#34;]</span>
</span></span><span class="line"><span class="cl">    <span class="na">path</span> <span class="o">=</span> <span class="s">~/.gitconfig-work</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[includeIf &#34;gitdir:~/personal/&#34;]</span>
</span></span><span class="line"><span class="cl">    <span class="na">path</span> <span class="o">=</span> <span class="s">~/.gitconfig-personal</span>
</span></span></code></pre></div><p>This will load <code>~/.gitconfig-work</code> when you&rsquo;re working in <code>~/work</code> and <code>~/.gitconfig-personal</code> when in <code>~/personal</code>.</p>
<h4 id="step-5-set-up-specific-git-configs">Step 5: Set Up Specific Git Configs</h4>
<p>Now, configure your <code>~/.gitconfig-work</code> and <code>~/.gitconfig-personal</code> files. These configurations will automatically select the correct SSH profile and Git identity.</p>
<p><strong><code>~/.gitconfig-personal</code>:</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[user]</span>
</span></span><span class="line"><span class="cl">    <span class="na">email</span> <span class="o">=</span> <span class="s">ian@ianduffy.ie
</span></span></span><span class="line"><span class="cl"><span class="s">    name = Ian Duffy</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[url &#34;git@personalgit:&#34;]</span>
</span></span><span class="line"><span class="cl">    <span class="na">insteadOf</span> <span class="o">=</span> <span class="s">&#34;git@github.com:&#34;</span>
</span></span></code></pre></div><p><strong><code>~/.gitconfig-work</code>:</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[user]</span>
</span></span><span class="line"><span class="cl">    <span class="na">signingkey</span> <span class="o">=</span> <span class="s">AAAAAAAA
</span></span></span><span class="line"><span class="cl"><span class="s">    email = username@work.com
</span></span></span><span class="line"><span class="cl"><span class="s">    name = Ian Duffy</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[commit]</span>
</span></span><span class="line"><span class="cl">    <span class="na">gpgsign</span> <span class="o">=</span> <span class="s">true</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[url &#34;git@workgit:&#34;]</span>
</span></span><span class="line"><span class="cl">    <span class="na">insteadOf</span> <span class="o">=</span> <span class="s">&#34;git@github.com:&#34;</span>
</span></span></code></pre></div><p><strong>How It Works:</strong><br>
The <code>insteadOf</code> configuration rewrites the GitHub URLs to custom SSH URLs (<code>git@personalgit:</code> and <code>git@workgit:</code>). These URLs then map to the appropriate SSH <code>Host</code> entries in your <code>~/.ssh/config</code>, ensuring the correct SSH key is used for each account automatically.</p>
<p>For example, when working in your personal directory, <code>git@github.com:personal-username/repo.git</code> becomes <code>git@personalgit:repo.git</code>, which uses the SSH key specified in the <code>Host personal-github</code> entry.</p>
<h4 id="wrapping-it-all-up">Wrapping It All Up</h4>
<p>With this setup, switching between your work and personal GitHub accounts happens automatically based on the project directory. Your email, GPG key, and SSH key will all be correctly configured, saving you from manual switching. Just focus on your code, and let the setup handle the rest!</p>

  </div>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

